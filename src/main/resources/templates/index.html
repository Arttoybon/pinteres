<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Pint - Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
	<div class="container-fluid min-vh-100 d-flex justify-content-center align-items-center bg-light">
		<div class="card login-card p-4 shadow-lg rounded-4">
	    <div class="text-center">
		    <i class="bi bi-pinterest text-danger fs-1 mb-2"></i>
		</div>

	    <h2 class="fw-bold mb-4">Te damos la bienvenida a Pint</h2>
	    
	    <div th:if="${param.registrado}" class="alert alert-success py-2 rounded-pill small mb-3">
	        <i class="bi bi-check-circle-fill me-1"></i> ¡Cuenta creada! Ya puedes entrar.
	    </div>
	
	    <div th:if="${param.error}" class="alert alert-danger py-2 rounded-pill small mb-3">
	        <i class="bi bi-exclamation-circle-fill me-1"></i> Usuario o contraseña incorrectos.
	    </div>
	
		<div th:if="${param.enlaceInvalido}" class="alert alert-danger py-2 rounded-pill small mb-3">
	        <i class="bi bi-exclamation-circle-fill me-1"></i> Enlace expirado, porfavor pida otro enlace
	    </div>
	
	    <div th:if="${param.existe}" class="alert alert-warning py-2 rounded-pill small mb-3">
	        <i class="bi bi-person-exclamation me-1"></i> Ese nombre de usuario ya está en uso.
	    </div>
	    
		<div th:if="${param.noexiste}" class="alert alert-danger py-2 rounded-pill small mb-3">
	        <i class="bi bi-exclamation-circle-fill me-1"></i> El usuario no existe
	    </div>
		    <div th:if="${param.recuperado}" class="alert alert-success py-2 rounded-pill small mb-3">
	        <i class="bi bi-check-circle-fill me-1"></i> Se ha enviado un correo para recuperar tu cuenta
	    </div>
	    <form th:action="@{/login}" method="post">
	        <input type="text" name="nombre" class="form-control mb-3 rounded-pill p-3 border-secondary-subtle" placeholder="Nombre de usuario" required>
	        <input type="password" name="contrasenya" class="form-control mb-3 rounded-pill p-3 border-secondary-subtle" placeholder="Contraseña" required>
	        
	        <div class="text-start mb-3 ps-2">
	            <a href="#" class="text-decoration-none text-dark fw-bold small" data-bs-toggle="modal" data-bs-target="#modalPass">¿Olvidaste tu contraseña?</a>
	        </div>
	
	        <button type="submit" class="btn btn-danger text-white w-100 py-2 shadow-sm">Iniciar sesión</button>
	    </form>
	
	    <div class="mt-4 pt-3 border-top">
	        <p class="mb-0 text-muted small">¿Aún no tienes cuenta?</p>
	        <button type="button" class="btn btn-outline-dark w-100 rounded-pill mt-2 fw-bold" data-bs-toggle="modal" data-bs-target="#modalRegistro">
	            Regístrate ahora
	        </button>
	    </div>
	</div>
	
	<div class="modal fade" id="modalRegistro" tabindex="-1" aria-hidden="true">
	    <div class="modal-dialog modal-dialog-centered">
	        <div class="modal-content rounded-5 border-0 shadow p-4">
	            <div class="modal-header border-0 pb-0">
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	            </div>
	            <div class="text-center px-3">
	                <i class="bi bi-person-plus-fill text-danger fs-1 mb-2"></i>
	                <h3 class="fw-bold">Únete a la comunidad</h3>
	                <p class="text-muted small">Encuentra nuevas ideas para probar</p>
	            </div>
	            <div class="modal-body">
					<form th:action="@{/usuario/registrar}" method="post">
					    <input type="text" name="nombre" class="form-control rounded-pill p-3 mb-3 bg-light border-0" placeholder="Nombre de usuario" required>
					    
					    <input type="email" name="correo" class="form-control rounded-pill p-3 mb-3 bg-light border-0" placeholder="Tu correo electrónico" required>
					    
					    <input type="password" name="contrasenya" class="form-control rounded-pill p-3 mb-4 bg-light border-0" placeholder="Crea una contraseña" required>
					    <button type="submit" class="btn btn-pinterest w-100 rounded-pill py-3 fw-bold">Continuar</button>
					</form>
	            </div>
	        </div>
	    </div>
	</div>
</div>
<div class="modal fade" id="modalPass" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content rounded-5 border-0 shadow p-3">
            <div class="text-center p-3">
                <h5 class="fw-bold">¿Tienes problemas para entrar?</h5>
                <p class="text-muted small">Introduce tu usuario y te ayudaremos.</p>
				<form th:action="@{/recuperar-password}" method="post">
				    
				    <p th:if="${error}" th:text="${error}" style="color: red;"></p>
				
				    <input type="text" name="usuario" class="form-control mb-3 rounded-pill p-3 border-secondary-subtle" placeholder="Introduce tu usuario" required>
				    
				    <button type="submit" class="btn btn-danger text-white w-100 py-2 shadow-sm">Restablecer</button>
				</form>
            </div>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>